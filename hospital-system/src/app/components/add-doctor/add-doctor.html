<div *ngIf="isLoggedIn">
  <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-8 mt-8">
    <h2 class="text-2xl font-bold text-blue-900 mb-6">Add New Doctor</h2>

    <!-- Success and Error Messages -->
    <div *ngIf="successMessage" class="text-green-500 mb-4">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="text-red-500 mb-4">
      {{ errorMessage }}
    </div>

    <form (ngSubmit)="onSubmit()" #doctorForm="ngForm">
      <!-- Doctor Identification -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="doctorId" class="block text-gray-700 font-semibold mb-2">Doctor ID</label>
          <input id="doctorId" name="doctorId" [(ngModel)]="doctorData.doctorId" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="ghanaCard" class="block text-gray-700 font-semibold mb-2">Ghana Card Number</label>
          <input id="ghanaCard" name="ghanaCard" [(ngModel)]="doctorData.ghanaCard" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
      </div>

      <!-- Personal Information -->
      <h3 class="text-xl font-semibold text-blue-800 mt-8 mb-4">Personal Information</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="firstName" class="block text-gray-700 font-semibold mb-2">First Name</label>
          <input id="firstName" name="firstName" [(ngModel)]="doctorData.firstName" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="lastName" class="block text-gray-700 font-semibold mb-2">Last Name</label>
          <input id="lastName" name="lastName" [(ngModel)]="doctorData.lastName" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="dob" class="block text-gray-700 font-semibold mb-2">Date of Birth</label>
          <input id="dob" name="dob" [(ngModel)]="doctorData.dob" type="date" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="gender" class="block text-gray-700 font-semibold mb-2">Gender</label>
          <select id="gender" name="gender" [(ngModel)]="doctorData.gender" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
            <option value="">Select gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>
      </div>

      <!-- Professional Information -->
      <h3 class="text-xl font-semibold text-blue-800 mt-8 mb-4">Professional Information</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="specialization" class="block text-gray-700 font-semibold mb-2">Specialization</label>
          <input id="specialization" name="specialization" [(ngModel)]="doctorData.specialization" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="department" class="block text-gray-700 font-semibold mb-2">Department</label>
          <select id="department" name="department" [(ngModel)]="doctorData.department" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
            <option value="">Select department</option>
            <option>General Medicine</option>
            <option>Cardiology</option>
            <option>Pediatrics</option>
            <option>Emergency</option>
            <option>Laboratory</option>
            <option>Pharmacy</option>
            <option>Surgery</option>
          </select>
        </div>
        <div>
          <label for="experience" class="block text-gray-700 font-semibold mb-2">Years of Experience</label>
          <input id="experience" name="experience" [(ngModel)]="doctorData.experience" type="number" min="0" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="license" class="block text-gray-700 font-semibold mb-2">Medical License Number</label>
          <input id="license" name="license" [(ngModel)]="doctorData.license" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
      </div>

      <!-- Contact Information -->
      <h3 class="text-xl font-semibold text-blue-800 mt-8 mb-4">Contact Information</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="phone" class="block text-gray-700 font-semibold mb-2">Phone Number</label>
          <input id="phone" name="phone" [(ngModel)]="doctorData.phone" type="tel" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div>
          <label for="email" class="block text-gray-700 font-semibold mb-2">Email</label>
          <input id="email" name="email" [(ngModel)]="doctorData.email" type="email" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
        </div>
        <div class="md:col-span-2">
          <label for="address" class="block text-gray-700 font-semibold mb-2">Residential Address</label>
          <textarea id="address" name="address" [(ngModel)]="doctorData.address" rows="2" required
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"></textarea>
        </div>
      </div>

      <!-- Submit Button with Loading Spinner -->
      <div class="mt-8 flex justify-end">
        <button type="submit"
                [disabled]="!doctorForm.form.valid || isLoading"
                class="flex items-center justify-center gap-2 bg-blue-900 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200 disabled:opacity-60 disabled:cursor-not-allowed">

          <!-- Spinner -->
          <svg *ngIf="isLoading" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"></path>
          </svg>

          <!-- Button Text -->
          <span *ngIf="isLoading">Saving...</span>
          <span *ngIf="!isLoading">Save Doctor</span>
        </button>
      </div>
    </form>
  </div>
</div>

