<nav class="bg-blue-700 text-white shadow-md relative z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center flex-wrap">
      
      <!-- Logo -->
      <div class="flex items-center">
        <div class="h-12 w-12 flex items-center justify-center bg-white rounded-full shadow-md mr-2">
          <img src="logo.png" alt="Hospital Logo" class="h-8 w-8 object-contain" />
        </div>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex flex-wrap space-x-6 items-center">
        <a routerLink="/dashboard" (click)="navigateAndClose()" class="hover:text-red-400">Dashboard</a>

        <!-- Patients Dropdown -->
        <div class="relative"
             (mouseenter)="openDropdownMenu('patients')" 
             (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Patients <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'patients'" class="absolute left-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-44 z-50">
            <a routerLink="/all-patients" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">All Patients</a>
            <a routerLink="/add-patient" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Add Patient</a>
            <a routerLink="/patient-records" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Patient Records</a>
          </div>
        </div>

        <!-- Doctors Dropdown -->
        <div class="relative"
             (mouseenter)="openDropdownMenu('doctors')" 
             (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Doctors <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'doctors'" class="absolute left-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-44 z-50">
            <a routerLink="/all-doctors" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">All Doctors</a>
            <a routerLink="/add-doctor" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Add Doctor</a>
            <a routerLink="/schedules" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Schedules</a>
          </div>
        </div>

        <!-- Appointments Dropdown -->
        <div class="relative" (mouseenter)="openDropdownMenu('appointments')" (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Appointments <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'appointments'" class="absolute left-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-48 z-50">
            <a routerLink="/all-appointments" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">All Appointments</a>
            <a routerLink="/book-appointment" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Book Appointment</a>
            <a routerLink="/appointment-history" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Appointment History</a>
          </div>
        </div>

        <!-- Lab & Pharmacy Dropdown -->
        <div class="relative" (mouseenter)="openDropdownMenu('lab')" (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Lab & Pharmacy <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'lab'" class="absolute left-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-48 z-50">
            <a routerLink="/laboratory-tests" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Laboratory Tests</a>
            <a routerLink="/test-results" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Test Results</a>
            <a routerLink="/pharmacy-stock" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Pharmacy Stock</a>
            <a routerLink="/prescriptions" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Prescriptions</a>
          </div>
        </div>

        <!-- Billing Dropdown -->
        <div class="relative" (mouseenter)="openDropdownMenu('billing')" (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Billing & Records <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'billing'" class="absolute left-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-52 z-50">
            <a routerLink="/billing" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Billing</a>
            <a routerLink="/invoices" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Invoices</a>
            <a routerLink="/medical-records" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Medical Records</a>
          </div>
        </div>

        <!-- Departments Dropdown -->
        <div class="relative" (mouseenter)="openDropdownMenu('departments')" (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Departments <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'departments'" class="absolute left-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-44 z-50">
            <a routerLink="/general-department" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">General Department</a>
            <a routerLink="/cardiology" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Cardiology</a>
            <a routerLink="/pediatrics" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Pediatrics</a>
            <a routerLink="/emergency" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Emergency</a>
          </div>
        </div>

        <!-- Reports Dropdown -->
        <div class="relative" (mouseenter)="openDropdownMenu('reports')" (mouseleave)="closeDropdownMenu()">
          <button class="hover:text-green-400 flex items-center">
            Reports <span class="ml-1">▾</span>
          </button>
          <div *ngIf="openDropdown === 'reports'" class="absolute right-0 flex flex-col bg-white text-black mt-2 rounded shadow-lg w-48 z-50">
            <a routerLink="/daily-reports" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Daily Reports</a>
            <a routerLink="/monthly-reports" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Monthly Reports</a>
            <a routerLink="/annual-reports" (click)="navigateAndClose()" class="block px-4 py-2 hover:bg-green-100">Annual Reports</a>
          </div>
        </div>

        <!-- Auth Section -->
        <div class="flex items-center ml-6 relative">
          <ng-container *ngIf="isLoggedIn; else guestLinks">
            <!-- Profile Icon and Name -->
            <div (click)="toggleDropdown('profile')" class="flex items-center space-x-2 cursor-pointer">
              <img src="path_to_your_profile_icon.png" alt="Profile" class="w-8 h-8 rounded-full">
              <span class="mr-4">{{ staffName }}</span>
            </div>

            <!-- Dropdown Menu -->
            <div *ngIf="openDropdown === 'profile'" class="absolute right-0 mt-2 bg-white text-black rounded shadow-lg w-48 z-50">
              <button (click)="logout()" class="w-full text-left px-4 py-2 hover:bg-gray-200 rounded-b-lg">Logout</button>
            </div>
          </ng-container>

          <!-- Guest Links -->
          <ng-template #guestLinks>
            <a routerLink="/login" (click)="navigateAndClose()" class="flex items-center space-x-2 hover:text-green-400">
              <span>Login</span>
            </a>
          </ng-template>
        </div>


      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden flex items-center">
        <button (click)="toggleMenu()" class="focus:outline-none">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>

      <!-- Mobile Menu -->
      <div *ngIf="menuOpen" class="md:hidden bg-blue-700 text-white w-full absolute top-16 left-0 z-50 shadow-lg">
        <a routerLink="/dashboard" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Dashboard</a>
        <a routerLink="/all-patients" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">All Patients</a>
        <a routerLink="/add-patient" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Add Patient</a>
        <a routerLink="/patient-records" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Patient Records</a>
        <a routerLink="/all-doctors" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">All Doctors</a>
        <a routerLink="/add-doctor" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Add Doctor</a>
        <a routerLink="/schedules" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Schedules</a>
        <a routerLink="/all-appointments" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">All Appointments</a>
        <a routerLink="/book-appointment" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Book Appointment</a>
        <a routerLink="/appointment-history" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Appointment History</a>
        <a routerLink="/laboratory-tests" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Laboratory Tests</a>
        <a routerLink="/test-results" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Test Results</a>
        <a routerLink="/pharmacy-stock" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Pharmacy Stock</a>
        <a routerLink="/prescriptions" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Prescriptions</a>
        <a routerLink="/billing" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Billing</a>
        <a routerLink="/invoices" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Invoices</a>
        <a routerLink="/medical-records" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Medical Records</a>
        <a routerLink="/general-department" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">General Department</a>
        <a routerLink="/cardiology" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Cardiology</a>
        <a routerLink="/pediatrics" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Pediatrics</a>
        <a routerLink="/emergency" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Emergency</a>
        <a routerLink="/daily-reports" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Daily Reports</a>
        <a routerLink="/monthly-reports" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Monthly Reports</a>
        <a routerLink="/annual-reports" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Annual Reports</a>

        <ng-container *ngIf="isLoggedIn; else mobileGuest">
          <span class="block px-4 py-2">👋 {{ staffName }}</span>
          <button (click)="logout()" class="w-full text-left px-4 py-2 bg-red-600 hover:bg-red-700">
            Logout
          </button>
        </ng-container>
        <ng-template #mobileGuest>
          <a routerLink="/login" (click)="closeMenu()" class="block px-4 py-2 hover:bg-blue-600">Login</a>
        </ng-template>
      </div>
    </div>
  </div>
</nav>
